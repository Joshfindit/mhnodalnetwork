<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Nodal Network</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/public/typeahead.css" rel="stylesheet">
    <style type="text/css">
      circle {
        cursor: move;
      }
      .node {
        fill: black;
        fill-opacity: 1;
        text-shadow:
          1px 1px 0 white, -1px -1px 0 white, 1px -1px 0 white, -1px 1px 0 white,
          2px 2px 0 white, -2px -2px 0 white, 2px -2px 0 white, -2px 2px 0 white;
        text-anchor: middle;
        cursor: pointer;
      }
      .node.selected {
        fill: blue;
      }
      .link {
        stroke: black;
        stroke-opacity: 0.6;
        stroke-width: 1.0;
      }
      .drawdistinput {
        width: 25px;
        position: relative;
        top: 50%;
        transform: translateY(11%);
      }
    </style>
  </head>
  <body>
    <script type="text/x-handlebars" data-template-name="graph">
      {{outlet}}
      {{outlet "modal"}}
    </script>
    <script type="text/x-handlebars" data-template-name="node">
      <div id="sidebar" style="position: absolute; top: 6px; left: 6px;">

        <div class="control-group controls" id="main-search">
          {{node-search content=nodes select-action="selectNode" select-without-match-action="newNode"}}
        </div>

        <div class="control-group">
          <div class="controls">
            {{input value=model.title placeholder="Name"}}
          </div>
        </div>

        <div class="control-group controls">
          {{textarea value=model.desc placeholder="Description"}}
        </div>

        <div class="control-group controls">
            <button id="delete" name="delete" {{action "deleteNode" model}} class="btn btn-mini btn-danger">Delete Node</button>
        </div>

        <div class="control-group controls">
          <label class="control-label" for="linklist">Links</label>
          <div id="linklist">
            <ul>
              {{#each adjnode in adjacencies}}
                <li>{{adjnode.title}} <button {{action 'deleteLink' adjnode}}>X</button></li>
              {{/each}}
              <li>{{node-search content=nodes select-action="addLink" select-without-match-action="newNodeAndAddLink"}}</li>
            </ul>
          </div>
        </div>

      </div>

      {{network-view nodes=nodes selectedId=id drawDistance=drawDistance select-action="selectNode"}}

      <div id="statusbar" style="position:absolute;bottom:5px;right:20px;">
        Draw distance {{input class="drawdistinput" type="number"
          min="1" value="3" max="9" value=drawDistance}}
        | {{nodes.length}} nodes
      </div>
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
    <!--script src="//cdnjs.cloudflare.com/ajax/libs/ember.js/1.9.1/ember.min.js"></script-->
    <script src="/public/ember.js"></script>
    <!--script src="//cdnjs.cloudflare.com/ajax/libs/ember-data.js/1.0.0-beta.14.1/ember-data.min.js"></script-->
    <script src="/public/ember-data.js"></script>
    <!--script src="//d3js.org/d3.v3.min.js"></script-->
    <script src="https://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.js"></script>
    <script type="text/javascript" src="/public/app.js"></script>
  </body>
</html>
